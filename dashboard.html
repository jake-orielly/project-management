<html>
    <head>
    <title>Development Version</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<link rel="stylesheet" href="css/style.css">
    <script src="https://cdn.jsdelivr.net/npm/vue/dist/vue.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/vue-router/dist/vue-router.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
</head>

    <body>
        <div id="app">
            <div id="topbar">
                <img src="images/logo.png" id="logo-img">
                <p class="clickable" @click="setTab('dashboard')">Dashboard</p>
                <p class="clickable" @click="setTab('myForms')">My Forms</p>
                <img src="images/avatar.png" id="avatar-img">
                <p id="user-name">Ann Perkins</p>
            </div>
            <div v-if="currTab == 'dashboard'" id="dashboard">
                <div id="inbox">
                    <div v-if="estimating == undefined">
                        <p class="title">Inbox</p>
                        <ul>
                            <li v-for="item in inbox">
                                <div class="dashboard-card">
                                    <p @click="openInboxItem(item)">{{item.description + " : " + item.response[1]}}</p>
                                </div>
                            </li>
                        </ul>
                    </div>
                    <div id="estimate-container" v-if="estimating != undefined">
                        <p class="title">Estimate Task</p>
                        <p>{{estimating.response[0]}}</p>
                        <p><input type="number" id="estimate-input"></p>
                        <button @click="submitEstimate">Submit</button>
                    </div>
                </div>
                <div id="calendar">
                    <p class="title">Calendar</p>
                    <div id="calendar-table-container">
                        <table id="calendar-table">
                            <thead>
                                <tr>
                                    <th v-for="day in daysOfWeek">{{day}}</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr v-for="row in [...Array(6).keys()]">
                                    <td v-for="col in [...Array(7).keys()]">
                                        <div class="calendar-cell" 
                                        v-bind:class="[
                                            (col == 0 || col == 6)? weekendClass : '',(calendarToDate(row,col) < 1 || 
                                            calendarToDate(row,col) > monthLength)? blankDateClass : '',
                                            (new Date() > new Date(2020, 4, calendarToDate(row,col), 23) ? pastDateClass : ''),
                                            workloadClasses(calendarToDate(row,col))]">
                                            {{(calendarToDate(row,col) > 0 && calendarToDate(row,col) <= monthLength ? calendarToDate(row,col) :'')}}
                                        </div>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
                <div id="taskList">
                    <p class="title">My Tasks</p>
                    <ul>
                        <li v-for="task in taskList">
                            <div class="dashboard-card">
                                <p>{{task.description}}</p>
                            </div>
                        </li>
                    </ul>
                </div>
            </div>
            <div v-if="currTab == 'myForms' && !formPreview" id="form-creation">
                <div id="field-input-container" v-if="!formSaved">
                    <p>Add a field:</p>
                    <p>
                        Type:
                        <select id="field-dropdown" v-model="currField">
                            <option v-bind:value="field" v-for="field in fieldTypes">{{caps(field)}}</option>
                        </select>
                    </p>
                    <p>
                        Label: 
                        <input type="text" id="field-label">
                    </p>
                    <ul v-if="currField == 'dropdown'">
                        <li>
                            <button id="dropdown-add" @click="dropdownAdd">Add Dropdown Option</button>
                        </li>
                        <li v-for="option in [...Array(numDropdownFields).keys()]">
                            <input type="text" class="currDropdownOption" placeholder="New Dropdown Option">
                        </li>
                    </ul>
                    <div v-if="currField == 'slider'">
                        <p>
                            Min: 
                            <input type="number" id="slider-min">
                        </p>
                        <p>
                            Max
                            <input type="number" id="slider-max">
                        </p>
                        <p>
                            Step
                            <input type="number" id="slider-step">
                        </p>
                        <p>
                            Initial
                            <input type="number" id="slider-initial">
                        </p>
                    </div>
                    <br>
                    <button id="field-add" @click="fieldAdd">Add</button>
                </div>
                <div id="form-container">
                    <div id="form-content" v-if="!formSaved">
                        <input placeholder="Form Title" type="text" id="form-title" v-model="formTitle">
                        <i class="fa fa-eye eye-icon" style="font-size:2rem; color:#2C666E;" @click="openFormPreview"></i>
                        <i class="fa fa-save save-icon" style="font-size:2rem; color:#2C666E;" @click="saveForm"></i>
                        <p v-if="fields.length == 0">Add some content to your form!</p>
                        <div v-for="field in fields" class="field-card">
                            <p>{{caps(field.label)}}
                                <span class="field-type">{{"(" + caps(field.type) + ")"}}</span>
                            </p>
                            <ul v-for="option in field.options">
                                <li>{{option}}</li>
                            </ul>
                            <ul v-for="property in (field.slider ? Object.keys(field.slider) : [])">
                                <li>{{caps(property) + ": " + field.slider[property]}}</li>
                            </ul>
                        </div>
                    </div>
                    <div v-if="formSaved">
                        <p>Your form has been saved to the database.</p>
                    </div>
                </div>
            </div>
            <div id="form-preview-modal" v-if="formPreview">
                <i class="fa fa-times form-preview-close" style="font-size:2rem; color:#2C666E;" @click="closeFormPreview"></i>
                <p class="title">{{formTitle}}</p>
                <div v-for="field in fields" class="form-field">
                    <p> {{field.label}}
                        <input v-if="field.type == 'text'" type="text">
                        <input v-if="field.type == 'number'" type="number">
                        <textarea v-if="field.type == 'text (long)'" type="number"></textarea>
                        <input v-if="field.type == 'date'" type="date">
                        <select v-if="field.type == 'dropdown'">
                            <option v-for="option in field.options" value="option">{{option}}</option>
                        </select>
                        <input v-if="field.type == 'slider'" type="range" 
                            :min="field.slider.min" 
                            :max="field.slider.max" 
                            :value="field.slider.initial" 
                            :step="field.slider.step" 
                            class="slider" id="myRange">
                    </p>
                </div>
            </div>
          </div>
        <script type="text/javascript" src="./js/requests.js"></script>
        <script type="text/javascript" src="js/data.js"></script>
        <script type="text/javascript" src="js/app.js"></script>
    </body>
</html>